import{g as a,s as i,a as u}from"./utils-C1ZufQCI.js";function h(e){if(e.ok)return e.json();throw new Error("Bad Response")}class l{constructor(t){this.category=t,this.path=`../json/${this.category}.json`}getData(){return fetch(this.path).then(h).then(t=>t)}async findProductById(t){return(await this.getData()).find(r=>r.Id===t)}}class p{constructor(t,o){this.productId=t,this.product={},this.dataSource=o}async init(){try{if(this.product=await this.dataSource.findProductById(this.productId),!this.product)throw new Error("Product not found");this.renderProductDetails(),document.getElementById("addToCart").addEventListener("click",this.addProductToCart.bind(this))}catch(t){console.error("Error loading product:",t),this.renderError()}}addProductToCart(){const t=a("so-cart")||[];t.push(this.product),i("so-cart",t),alert("Product added to cart!")}renderProductDetails(){const t=document.querySelector("h3"),o=document.querySelector("h2"),r=document.querySelector(".product-detail img"),c=document.querySelector(".product-card__price"),n=document.querySelector(".product__color"),d=document.querySelector(".product__description"),s=document.getElementById("addToCart");t&&(t.textContent=this.product.Brand.Name),o&&(o.textContent=this.product.NameWithoutBrand),r&&(r.src=this.product.Image,r.alt=this.product.NameWithoutBrand),c&&(c.textContent=`$${this.product.FinalPrice}`),n&&(n.textContent=this.product.Colors?.[0]?.ColorName||"N/A"),d&&(d.innerHTML=this.product.DescriptionHtmlSimple),s&&(s.dataset.id=this.product.Id)}renderError(){const t=document.querySelector("main");t&&(t.innerHTML=`
        <section class="product-detail">
          <h2>Product Not Found</h2>
          <p>Sorry, we couldn't find the product you're looking for.</p>
          <a href="/index.html">Return to Home</a>
        </section>
      `)}}const m=u("product"),f=new l("tents"),y=new p(m,f);y.init();
